**Q.1) Write a Java Servlet Program to implement a dynamic Html using Servlet (username and password should be accepted using HTML and displayed using Servlet).**

**Code:**

**index.html**

```html
<!DOCTYPE html>
<html>
<head>
    <title>Login Form</title>
</head>
<body>
    <h2>Login Page</h2>
    <form action="LoginServlet" method="post">
        <label>Username:</label>
        <input type="text" name="username" ><br><br>

        <label>Password:</label>
        <input type="password" name="password" ><br><br>

        <input type="submit" value="Login">
    </form>

</body>
</html>
```

**LoginServlet.java**

```java
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class LoginServlet extends HttpServlet {
    public void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        String username = request.getParameter("username");
        String password = request.getParameter("password");

        out.println("<html><body>");
        out.println("<h2>Login Details</h2>");
        out.println("<p>Username: " + username + "</p>");
        out.println("<p>Password: " + password + "</p>");
        out.println("</body></html>");
    }
}
```

**web.xml**

```xml
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
         http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
         version="3.1">

    <servlet>
        <servlet-name>LoginServlet</servlet-name>
        <servlet-class>LoginServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>LoginServlet</servlet-name>
        <url-pattern>/LoginServlet</url-pattern>
    </servlet-mapping>

</web-app>
```

**Q.2) Write a Java Servlet Program to Auto Web Page Refresh (Consider a webpage which is displaying Date and time or stock market status. For all such type of pages, you would need to refresh your webpage regularly; Java Servlet make this job easy by providing refresh automatically after a given interval).**

**Code:**

**AutoRefreshServlet.java**

```java
import java.io.*;
import java.util.Date;
import javax.servlet.*;
import javax.servlet.http.*;

public class AutoRefreshServlet extends HttpServlet {

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        response.setContentType("text/html");
        response.setIntHeader("Refresh", 5);

        PrintWriter out = response.getWriter();
        
        Date currentDate = new Date();

        out.println("<html><body style='font-family:Arial;'>");
        out.println("<h2>Auto Refresh Example</h2>");
        out.println("<p>This page refreshes every 5 seconds.</p>");
        out.println("<h3>Current Date & Time: " + currentDate.toString() + "</h3>");
        out.println("</body></html>");
    }
}
```

**web.xml**

```xml
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
         http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
         version="3.1">

    <servlet>
        <servlet-name>AutoRefreshServlet</servlet-name>
        <servlet-class>AutoRefreshServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>AutoRefreshServlet</servlet-name>
        <url-pattern>/AutoRefreshServlet</url-pattern>
    </servlet-mapping>

</web-app>
```

**Q.3) Write a Java Servlet Program using Cookie to remember user preference.**

**Code:**

**index.html**

```html
<!DOCTYPE html>
<html>
<head>
    <title>Set Your Preference</title>
</head>
<body>
    <h2>Choose Background Color</h2>
    <form action="PreferenceServlet" method="post">
        <label>Select Color:</label>
        <select name="color">
            <option value="white">White</option>
            <option value="lightblue">Light Blue</option>
            <option value="lightgreen">Light Green</option>
            <option value="lightyellow">Light Yellow</option>
        </select>
        <br><br>
        <input type="submit" value="Save Preference">
   
   </form>
</body>
</html>
```

**PreferenceServlet.java**

```java
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class PreferenceServlet extends HttpServlet {

    @Override
    public void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        String color = request.getParameter("color");

        Cookie colorCookie = new Cookie("bgColor", color);
        colorCookie.setMaxAge(60 * 60 * 24 * 7); // store for 1 week
        response.addCookie(colorCookie);

        response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        out.println("<html><body style='background-color:" + color + "; font-family:Arial;'>");
        out.println("<h2>Your preferred background color is saved!</h2>");
        out.println("<p>Next time you visit, we will remember it.</p>");
        out.println("<a href='PreferenceServlet'>Go to Home</a>");
        out.println("</body></html>");
    }

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        String color = "white"; // default

        Cookie[] cookies = request.getCookies();
        if (cookies != null) {
            for (Cookie c : cookies) {
                if (c.getName().equals("bgColor")) {
                    color = c.getValue();
                }
            }
        }

        response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        out.println("<html><body style='background-color:" + color + "; font-family:Arial;'>");
        out.println("<h2>Welcome Back!</h2>");
        out.println("<p>Your saved background color is applied.</p>");
        out.println("<a href='index.html'>Change Preference</a>");
        out.println("</body></html>");
    }
}
```

**web.xml**

```xml
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
        
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
         http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
         version="3.1">

    <servlet>
        <servlet-name>PreferenceServlet</servlet-name>
        <servlet-class>PreferenceServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>PreferenceServlet</servlet-name>
        <url-pattern>/PreferenceServlet</url-pattern>
    </servlet-mapping>

</web-app>
```

**Q.4) Write a Java Servlet program to track Http Session by accepting username and password using HTML and display the profile page on successful login.**

**Code:**

**index.html**

```html
<!DOCTYPE html>
<html>
<head>
    <title>Login Page</title>
</head>
<body>
    <h2>Login</h2>
    <form action="LoginServlet" method="post">
        Username: <input type="text" name="username" required><br><br>
        Password: <input type="password" name="password" required><br><br>
        <input type="submit" value="Login">
    </form>
</body>
</html>
```

**LoginServlet.java**

```java
package mypack;
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

public class LoginServlet extends HttpServlet {
    @Override
    public void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        
        String username = request.getParameter("username");
        String password = request.getParameter("password");

        if(username.equals("admin") && password.equals("1234")){
            HttpSession session = request.getSession();
            session.setAttribute("username", username);
            response.sendRedirect("ProfileServlet");
        } else {
            out.println("<h3>Invalid username or password</h3>");
            out.println("<a href='index.html'>Try Again</a>");
        }
    
    }
}
```

**ProfileServlet.java**

```java
package mypack;
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

public class ProfileServlet extends HttpServlet {
    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        
        HttpSession session = request.getSession(false);

        if(session != null && session.getAttribute("username") != null){
            String username = (String) session.getAttribute("username");
            out.println("<h2>Welcome, " + username + "!</h2>");
            out.println("<p>This is your profile page.</p>");
        } 
        else {
            out.println("<h3>Please login first</h3>");
           
             out.println("<a href='index.html'>Login Here</a>");
        }
    }
}
```

**web.xml**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee 
         http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
         version="3.1">

    <servlet>
        <servlet-name>LoginServlet</servlet-name>
        <servlet-class>mypack.LoginServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>LoginServlet</servlet-name>
        <url-pattern>/LoginServlet</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>ProfileServlet</servlet-name>
        <servlet-class>mypack.ProfileServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ProfileServlet</servlet-name>
        <url-pattern>/ProfileServlet</url-pattern>
    
          </servlet-mapping>

</web-app>
```

**Q.5) Write a JSP program to implement all the attributes of page directive tag.**

**Code:**

**Index.jsp**

```plaintext
<%@ page 
    language="java"
    contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"
    import="java.util.Date, java.text.SimpleDateFormat"
    buffer="8kb"
    autoFlush="true"
    isThreadSafe="true"
    errorPage="error.jsp"
    info="This page demonstrates page directive attributes."
%>

<!DOCTYPE html>
<html>
<head>
    <title>JSP Page Directive Demo</title>

</head>
<body>
    <h2>Welcome to JSP Page Directive Demo</h2>

    <%
        SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy HH:mm:ss");
        out.println("Current Date & Time: " + sdf.format(new Date()) + "<br>");
    %>

    <p>Page Info: This page demonstrates page directive attributes.</p>

</body>
</html>
```

**Error.jsp**

```plaintext
<%@ page isErrorPage="true" %>
<!DOCTYPE html>
<html>
<head>
    <title>Error Page</title>
</head>
<body>
    <h2>An Error Occurred</h2>
    <p>Error Message: <%= exception.getMessage() %></p>
</body>
</html>
```

**Q.6) Write a JSP Program to get student information through a HTML and create a JAVA Bean class, populate Bean and display the same information through another JSP.**

**Code:**

**Student.java**

```java
package beans;

public class Student {
    private String name;
    private String rollNo;
    private String email;
    private String course;

    public Student() { }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    public String getRollNo() {
        return rollNo;
    }
    public void setRollNo(String rollNo) {
        this.rollNo = rollNo;
    }

    public String getEmail() {
        return email;
    }
    public void setEmail(String email) {
        this.email = email;
    }

    public String getCourse() {
        return course;
    }
    public void setCourse(String course) {
        this.course = course;
    }
}
```

**studentForm.html**

```html
<!DOCTYPE html>
<html>
<head>
    <title>Student Form</title>
</head>
<body>
    
    <h2>Enter Student Information</h2>
    <form action="displayStudent.jsp" method="post">
        Name: <input type="text" name="name" required><br><br>
        Roll No: <input type="text" name="rollNo" required><br><br>
        Email: <input type="email" name="email" required><br><br>
        Course: <input type="text" name="course" required><br><br>
        <input type="submit" value="Submit">
    </form>
</body>
</html>
```

**displayStudent.jsp**

```plaintext
<%@ page import="beans.Student" %>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>

<%
    Student student = new Student();
    student.setName(request.getParameter("name"));
    student.setRollNo(request.getParameter("rollNo"));
    student.setEmail(request.getParameter("email"));
    student.setCourse(request.getParameter("course"));
%>

<!DOCTYPE html>
<html>
<head>
    <title>Student Details</title>
</head>
<body>
   
    <h2>Student Information</h2>
    <p><b>Name:</b> <%= student.getName() %></p>
    <p><b>Roll No:</b> <%= student.getRollNo() %></p>
    <p><b>Email:</b> <%= student.getEmail() %></p>
    <p><b>Course:</b> <%= student.getCourse() %></p>
</body>
</html>
```

**Q.7) Using JSF Standard Component and Facelet Tags.**

**Code:**

**index.xhtml**

```xml
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html">
    <h:head>
        <title>User Details</title>
    </h:head>
    <h:body>
        <h:form>
            <h:panelGrid columns="2" cellpadding="5">
                <h:outputLabel for="t1" value="Name:" />
                <h:inputText id="t1" value="#{test.name}" />

                <h:outputLabel for="t2" value="Surname:" />
                
                 <h:inputText id="t2" value="#{test.surname}" />
            </h:panelGrid>

            <br/>
            <h:commandButton value="Submit" action="#{test.show}" />
        </h:form>
    </h:body>
</html>
```

**result.xhtml**

```xml
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html">
 <h:head>
        <title>User Details</title>
 </h:head>
  <h:body>
        #{test.name}
        #{test.surname}
  </h:body>
</html>
```

**student.java**

```java
package mypack;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;

@ManagedBean(name="test")
@RequestScoped
 public class student {
 String name, surname;

 public String getName() {
        return name;
  }

  public void setName(String name) {
        this.name = name;
  }

  public String getSurname() {
        return surname;
  }

  public void setSurname(String surname) {
        this.surname = surname;
  }
  
   public String show(){
            if(name.equalsIgnoreCase("Akshat")){
                return "Success";
            }
       
      else{
               return "Fail";
             }
        }
     }
```

**faces-config.xml**

```xml
<?xml version='1.0' encoding='UTF-8'?>
<faces-config version="2.2"
    xmlns="http://xmlns.jcp.org/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_2.xsd">

    <navigation-rule>
        <from-view-id>/index.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>Fail</from-outcome>
            <to-view-id>/result.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>Success</from-outcome>
            <to-view-id>/result.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
</faces-config>
```

**Q.8) Demonstrate an EJB application that demonstrates Session Bean (with appropriate business logic).**

**Code:**

**index.xhtml**

```html
<!DOCTYPE html>
<html>
    <head>
        <title>Currency Converter</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
    </head>
    <body>
        <form action="first" method="get">
            Username:<input type="text" name= "t1"><br><br>
            Currency:<input type="text" name="t2"><br><br>
            <input type="submit" value="Submit"><br>
        </form>
    </body>
</html>
```

**CurrencyConvertor.java**

```java
package mypack;
import javax.ejb.Stateless;

@Stateless
public class CurrencyConvertor {

    String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Double show(double a) {
        return a * 87;
    }
    
}
```

**first.java**

```java
import java.io.IOException;
import java.io.PrintWriter;
import javax.ejb.EJB;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;

import javax.servlet.http.HttpServletResponse;
import mypack.CurrencyConvertor;

public class first extends HttpServlet {
@EJB
private CurrencyConvertor currencyConvertor;

@Override
public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException,    ServletException {
     response.setContentType("text/html");
     PrintWriter out= response.getWriter();
  double b = Double.parseDouble(request.getParameter("t2"));
  double c = currencyConvertor.show(b);
  out.println(c);
  String a = request.getParameter("t1");
      }
}
```

**web.xml**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.1" xmlns="http://xmlns.jcp.org/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd">
    <servlet>
        <servlet-name>first</servlet-name>
        <servlet-class>first</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>first</servlet-name>
        
         <url-pattern>/first</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app>
```
